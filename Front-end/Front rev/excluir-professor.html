<!DOCTYPE html>
<html lang="pt-BR">
<head>
    <meta charset="UTF-8">
    <title>Excluir Professor</title>
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <header>
        <!-- Cabeçalho -->
        <h1><a href="menu.html" style="color:white; text-decoration:none;">Instituto Recriar</a></h1>
    </header>

    <!-- Menu lateral -->
    <div id="menu-container"></div>
    

    <div class="container">
        <h2>Excluir Professor</h2>
        <p>Tem certeza que deseja excluir o professor abaixo?</p>

        <!-- Área onde serão exibidos os dados do professor selecionado -->
        <div id="dadosProfessor" style="margin: 1rem 0; padding: 1rem; border: 1px solid #ccc; border-radius: 6px;"></div>

        <!-- Botões de ação -->
        <div style="text-align:center; margin-top:1rem;">
            <button onclick="confirmarExclusao()">Confirmar</button>
            <button onclick="cancelarExclusao()">Cancelar</button>
        </div>
    </div>

    <script src="menu.js"></script>
    <script>
    document.addEventListener("DOMContentLoaded", () => {
      // BACKEND: Carregar o menu e barra superior
      // O menu.js já faz isso, mas se precisar de dados do backend para o menu, inserir aqui.

      // Pega o ID da query string (ex: excluir-professor.html?id=P001)
      const urlParams = new URLSearchParams(window.location.search);
      const professorId = urlParams.get("id");

      if (professorId) {
        carregarDadosProfessorParaExclusao(professorId);
      } else {
        console.error("ID do professor não fornecido na URL.");
        alert("ID do professor não fornecido. Por favor, retorne à página de professores.");
        // BACKEND: Opcional: redirecionar para a página de listagem de professores
        // window.location.href = 'professores.html';
      }
    });

    async function carregarDadosProfessorParaExclusao(id) {
      // BACKEND: Substituir esta simulação pela chamada à API para buscar os dados do professor pelo ID
      try {
        // Exemplo de como seria a chamada real (assumindo uma API REST)
        // const response = await fetch(`/api/professores/${id}`);
        // if (!response.ok) throw new Error('Erro ao carregar professor');
        // const professor = await response.json();

        // Simulação de dados
        const professoresMock = [
          {id:"P001", nomeProfessor:"Carlos Silva", disciplina:"Matemática", email:"carlos.silva@email.com", telefone:"(27)99999-0000"}
        ];
        const professor = professoresMock.find(p => p.id === id);

        // Mostra dados na tela
        if(professor){
          document.getElementById("dadosProfessor").innerHTML = `
            <p><strong>ID:</strong> ${professor.id}</p>
            <p><strong>Nome:</strong> ${professor.nomeProfessor}</p>
            <p><strong>Disciplina:</strong> ${professor.disciplina}</p>
            <p><strong>Email:</strong> ${professor.email}</p>
            <p><strong>Telefone:</strong> ${professor.telefone}</p>
          `;
        }else{
          document.getElementById("dadosProfessor").innerHTML = "<p style=\'color:red;\'>Professor não encontrado!</p>";
          alert("Professor não encontrado!");
          // BACKEND: Opcional: redirecionar para a página de listagem de professores
          // window.location.href = 'professores.html';
        }
      } catch (error) {
        console.error("Erro ao carregar dados do professor para exclusão:", error);
        alert("Não foi possível carregar os dados do professor.");
      }
    }

    // Funções dos botões
    async function confirmarExclusao(){
      const urlParams = new URLSearchParams(window.location.search);
      const professorId = urlParams.get("id");

      if (!professorId) {
        alert("ID do professor não encontrado para exclusão.");
        return;
      }

      // BACKEND: Chamar API para exclusão do professor
      try {
        // Exemplo de como seria a chamada real (assumindo uma API REST DELETE)
        // const response = await fetch(`/api/professores/${professorId}`, {
        //   method: 'DELETE'
        // });

        // if (!response.ok) throw new Error('Erro ao excluir professor');

        alert("Professor excluído com sucesso! (Simulado)");
        window.location.href = "professores.html"; // volta para a lista
      } catch (error) {
        console.error("Erro ao excluir professor:", error);
        alert("Não foi possível excluir o professor.");
      }
    }

    function cancelarExclusao(){
      window.location.href = "professores.html"; // volta para a lista sem excluir
    }
    </script>
</body>
</html>

